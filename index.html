<!--
/*
Affinitomics Dungeon API Javascript Example 
Copyright (C) 2015 Prefrent
*/

/*
Version: 0.8
Author: Prefrent
Author URI: http://prefrent.com
*/

// +----------------------------------------------------------------------+
// | This program is free software; you can redistribute it and/or modify |
// | it under the terms of the GNU General Public License, version 2, as  |
// | published by the Free Software Foundation.                           |
// |                                                                      |
// | This program is distributed in the hope that it will be useful,      |
// | but WITHOUT ANY WARRANTY; without even the implied warranty of       |
// | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the        |
// | GNU General Public License for more details.                         |
// |                                                                      |
// | You should have received a copy of the GNU General Public License    |
// | along with this program; if not, write to the Free Software          |
// | Foundation, Inc., 51 Franklin St, Fifth Floor, Boston,               |
// | MA 02110-1301 USA                                                    |
// +----------------------------------------------------------------------+
-->

<html>
	<head>
		Welcome to the Affinitomics Dungeon!

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="js_lib/affinitomics_api_key.js"></script>
		<script src="js_lib/dungeon_aimojo_pro.js"></script>
		<script src="objects.js"></script>
		<link rel="stylesheet" type="text/css" href="styles.css">
	</head>


	<body>

		<div id="no_api_key">
			<h2> NOTE: An Affinitomics API Key is necessary to use this example </h2>
			<h3> Please go to <a href="https://www.affinitomics.com/users/sign_up" target="_blank">Affinitomics.com</a> to obtain a key </h3>
		
			<div> Once you have obtained an API key, set the g_apiKey variable in the affinitomics_api_key.js file and reload this page.</div>
			<div> (you may need to reset your broswer's cache) </div>
		</div>

		<input id="start_button" type="button" value="Start!" onclick="StartGame();">

		<div id="dungeon_game" />
		</div>

	</body>

</html>

<script>

$( document ).ready( initFunction );

var _dungeon = 0;
var _player = 0;

var _gameManager = 0;
var _keyValid = false;

function initFunction()
{
	if (CheckKey())
	{
		setupGameManager();
	}

}

function StartGame()
{
	if (g_gameManager && _keyValid)
	{
		g_gameManager.StartGame();
	}
}


/* perform the necessary steps to setup the game manager full of objects */
function setupGameManager()
{
	g_gameManager = new GameManager();
}

//this function ensures that an API key has been added to the g_apiKey variable in the affinitomics_api_key.js file before continuing with server calls 
function CheckKey()
{
	if (g_apiKey.length > 0)
	{
		_keyValid = true;
		return true;
	}

	 jQuery('#no_api_key').show();
	 jQuery('#start_button').hide();
 
	_keyValid = false;
	return false;
}

</script>




